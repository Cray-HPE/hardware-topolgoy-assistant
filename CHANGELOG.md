# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.3.0] - 2023-05-04
### Changed
* Updated the go4.org assume-no-moving-gc depenedency so that the unittests build with newer golang.

## [0.2.0] - 2023-02-02

### Added
* The log directory now contains the modified SLS state and BSS boot parameter data generated by this tool.
* Added an advance option to ignore CANU hardware architectures that are unknown to this tool. If it is determined that a pieces of hardware that are unknown to this tool can be safely ignore (such as if CANU starts supporting a new hardware type) this tool can ignore it. In the long term it would be good for this tool to utilize the same schemas that CANU consumes for network and hardware definitions.    
* Add some advance options to allow the hardware topology assistant to add hardware to a system if it detects hardware removed from the system. 
* The auto generated `application_node_metadata.yaml` file now has a field to show the corresponding CANU common name for that pieces of hardware to help make determine the application node sub role and alias easier to figure out. 

    Before:
    ```yaml
    x3001c0s1b0n0:
      subrole: ~~FIXME~~
      aliases:
      - ~~FIXME~~
    ```

    After:
    ```yaml
    x3001c0s1b0n0:
      canu_common_name: lnet001
      subrole: ~~FIXME~~
      aliases:
      - ~~FIXME~~
    ```

### Changed
* Check to see if IP address has been already allocated, before allocate an IP.
* Generate cabinet routes files for management NCNs correctly. I found that an extra file was being generated for the CMN network, and the NMN uai_macvlan subnet was getting into the NMN routes file.
* Detect cabinets correctly, by ensure that they start with `x` prefix. It was found that CDU cooling groups where getting confused as a River cabinet. Cooling groups can now either begin with `cdu` or `d`.
* Check to see if a CDU switch is located in a river cabinet by checking its location starts with `x`, and if not consider the switch to be located within the CDU.
* Ignore `KVM` (keyboard video mouse) devices in river racks, as they are not managed by CSM.
* Added some better error handling when allocating IP address when the xname or alias is already present in the SLS network data.

## [0.1.0] - 2022-08-11

### Added
- CASMINST-3902: Initial version of the hardware-topology-assistant to aid in the process of adding additional River cabinets to a system. 
  
  Limitations:
  - Does not support adding of Management NCNs. Existing documented manual procedure will need to be followed.
  - Does not support the removal of River hardware. Existing manual procedures will need to be followed.
  - Does not support adding or removing liquid-cooled cabinets. Existing manual procedures for adding liquid-cooled cabinets will need to be followed.
